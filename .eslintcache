[{"C:\\codetemp\\babynames\\frontend\\babynames\\src\\index.js":"1","C:\\codetemp\\babynames\\frontend\\babynames\\src\\App.js":"2","C:\\codetemp\\babynames\\frontend\\babynames\\src\\reportWebVitals.js":"3","C:\\codetemp\\babynames\\frontend\\babynames\\src\\components\\Name.js":"4","C:\\codetemp\\babynames\\frontend\\babynames\\src\\components\\NameStyled.js":"5","C:\\codetemp\\babynames\\frontend\\babynames\\src\\components\\List.js":"6","C:\\codetemp\\babynames\\frontend\\babynames\\src\\components\\ListStyled.js":"7","C:\\codetemp\\babynames\\frontend\\babynames\\src\\components\\Input.js":"8","C:\\codetemp\\babynames\\frontend\\babynames\\src\\utils\\debounce.js":"9","C:\\codetemp\\babynames\\frontend\\babynames\\src\\hooks\\useDebounce.js":"10","C:\\codetemp\\babynames\\frontend\\babynames\\src\\hooks\\useFetchNames.js":"11"},{"size":502,"mtime":1610363582227,"results":"12","hashOfConfig":"13"},{"size":2469,"mtime":1612362511062,"results":"14","hashOfConfig":"13"},{"size":362,"mtime":499162500000,"results":"15","hashOfConfig":"13"},{"size":249,"mtime":1611238653553,"results":"16","hashOfConfig":"13"},{"size":279,"mtime":1611238658693,"results":"17","hashOfConfig":"13"},{"size":160,"mtime":1610366631823,"results":"18","hashOfConfig":"13"},{"size":128,"mtime":1610366842951,"results":"19","hashOfConfig":"13"},{"size":710,"mtime":1612362629176,"results":"20","hashOfConfig":"13"},{"size":0,"mtime":1610461834227,"results":"21","hashOfConfig":"13"},{"size":1299,"mtime":1610628231109,"results":"22","hashOfConfig":"13"},{"size":3511,"mtime":1612351425095,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"ke7wyl",{"filePath":"27","messages":"28","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"48","usedDeprecatedRules":"26"},"C:\\codetemp\\babynames\\frontend\\babynames\\src\\index.js",[],["49","50"],"C:\\codetemp\\babynames\\frontend\\babynames\\src\\App.js",["51"],"C:\\codetemp\\babynames\\frontend\\babynames\\src\\reportWebVitals.js",[],"C:\\codetemp\\babynames\\frontend\\babynames\\src\\components\\Name.js",[],"C:\\codetemp\\babynames\\frontend\\babynames\\src\\components\\NameStyled.js",[],"C:\\codetemp\\babynames\\frontend\\babynames\\src\\components\\List.js",[],"C:\\codetemp\\babynames\\frontend\\babynames\\src\\components\\ListStyled.js",[],"C:\\codetemp\\babynames\\frontend\\babynames\\src\\components\\Input.js",["52","53"],"C:\\codetemp\\babynames\\frontend\\babynames\\src\\utils\\debounce.js",[],["54","55"],"C:\\codetemp\\babynames\\frontend\\babynames\\src\\hooks\\useDebounce.js",[],"C:\\codetemp\\babynames\\frontend\\babynames\\src\\hooks\\useFetchNames.js",["56","57"],"import {useState, useEffect, useRef} from 'react'\r\n\r\n\r\nexport const useFetchNames = (debouncedSearchTerm, inView, limit, initialController, additionalController ) => {\r\n    const [data, setData] = useState([]);\r\n    const [total, setTotal] = useState(\"\")\r\n    const [remaining, setRemaining] = useState(\"\")\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const firstUpdate = useRef(true);\r\n\r\n    // GENERAL FETCH API DATA\r\n    const getData = async (queryString, controller) => {\r\n        console.log('Getting data') \r\n        try {\r\n        setIsLoading(true)\r\n        const response = await fetch(`http://localhost:5000/names?limit=${limit}${queryString}`,{signal: controller.signal});\r\n        const responseData = await response.json();\r\n        return responseData\r\n        }\r\n        catch (err) {\r\n            if (err.name === 'AbortError') { // handle abort()\r\n                console.error(err);\r\n                return []\r\n            } \r\n            else {\r\n                throw err;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    //FETCHING ADDITIONAL DATA ON SCROLL\r\n    useEffect(() => {\r\n        console.log(\"inView: \", inView)\r\n        additionalController.current = new AbortController(); \r\n        \r\n        if (!inView && !firstUpdate.current && !isLoading && remaining > 0) {\r\n            // if user has scrolled passed ref\r\n            // it is not the first fetch request\r\n            // data is not being loaded already\r\n            // data remains\r\n        \r\n            const fetchAdditionalData = async () => {\r\n\r\n                const queryString = debouncedSearchTerm ? `&startId=${data[data.length-1]._id}&search=${debouncedSearchTerm}` : `&startId=${data[data.length-1]._id}`;\r\n                 // if there is a search term include it in query\r\n\r\n                const additionalData = await getData(queryString, additionalController.current)\r\n                additionalData.names ? setData([...data, ...additionalData.names]) : setData(data);\r\n                additionalData.total ? setRemaining(additionalData.total-additionalData.names.length) : setRemaining(remaining);\r\n                setIsLoading(false)\r\n            \r\n            };\r\n\r\n            fetchAdditionalData();\r\n\r\n        }\r\n\r\n        return () => {\r\n            additionalController.current.abort();\r\n        }\r\n    \r\n    }, [inView]);\r\n\r\n\r\n    //FETCHING INITIAL DATA ON FIRST RENDER OR SEARCH\r\n    useEffect(() => {\r\n\r\n        firstUpdate.current = false;\r\n        initialController.current = new AbortController(); \r\n\r\n        const fetchInitialData = async () => {\r\n            \r\n            const queryString = \r\n            debouncedSearchTerm ? `&search=${debouncedSearchTerm}` \r\n            : '';\r\n            // if there is a search term include it in query\r\n\r\n            const initialData = await getData(queryString, initialController.current)\r\n            initialData && window.scrollTo(0, 0);\r\n            initialData.names ? setData(initialData.names) : setData([]) ;\r\n            initialData.total ? setTotal(initialData.total) : setTotal(\"0\");\r\n            initialData.total ? setRemaining(initialData.total-initialData.names.length) : setRemaining(\"0\");\r\n            setIsLoading(false);\r\n        \r\n        };\r\n\r\n        fetchInitialData();\r\n\r\n\r\n        return () => {\r\n            initialController.current.abort();\r\n            additionalController.current.abort();\r\n        }\r\n        \r\n    }, [debouncedSearchTerm]);\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return {data, total, remaining, isLoading}\r\n}",{"ruleId":"58","replacedBy":"59"},{"ruleId":"60","replacedBy":"61"},{"ruleId":"62","severity":1,"message":"63","line":1,"column":27,"nodeType":"64","messageId":"65","endLine":1,"endColumn":36},{"ruleId":"62","severity":1,"message":"66","line":5,"column":12,"nodeType":"64","messageId":"65","endLine":5,"endColumn":22},{"ruleId":"62","severity":1,"message":"67","line":5,"column":24,"nodeType":"64","messageId":"65","endLine":5,"endColumn":37},{"ruleId":"58","replacedBy":"68"},{"ruleId":"60","replacedBy":"69"},{"ruleId":"70","severity":1,"message":"71","line":64,"column":8,"nodeType":"72","endLine":64,"endColumn":16,"suggestions":"73"},{"ruleId":"70","severity":1,"message":"74","line":97,"column":8,"nodeType":"72","endLine":97,"endColumn":29,"suggestions":"75"},"no-native-reassign",["76"],"no-negated-in-lhs",["77"],"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'inputState' is assigned a value but never used.","'setInputState' is assigned a value but never used.",["76"],["77"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'additionalController', 'data', 'debouncedSearchTerm', 'getData', 'isLoading', and 'remaining'. Either include them or remove the dependency array. You can also do a functional update 'setRemaining(r => ...)' if you only need 'remaining' in the 'setRemaining' call.","ArrayExpression",["78"],"React Hook useEffect has missing dependencies: 'additionalController', 'getData', and 'initialController'. Either include them or remove the dependency array.",["79"],"no-global-assign","no-unsafe-negation",{"desc":"80","fix":"81"},{"desc":"82","fix":"83"},"Update the dependencies array to be: [additionalController, data, debouncedSearchTerm, getData, inView, isLoading, remaining]",{"range":"84","text":"85"},"Update the dependencies array to be: [additionalController, debouncedSearchTerm, getData, initialController]",{"range":"86","text":"87"},[2335,2343],"[additionalController, data, debouncedSearchTerm, getData, inView, isLoading, remaining]",[3425,3446],"[additionalController, debouncedSearchTerm, getData, initialController]"]